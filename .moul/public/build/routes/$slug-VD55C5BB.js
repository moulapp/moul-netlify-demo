import{b as S}from"/build/_shared/chunk-G6KJ5R5X.js";import{a as A,b as H,c as E,d as C}from"/build/_shared/chunk-MOVLUFA3.js";import{b as W,d as P,g as O,h as s,i as L,l as z,p as k}from"/build/_shared/chunk-FW5UCOTS.js";var D=W((X,U)=>{L();U.exports=function(c,o){var t,i,y,e,r,a=[],n,u=o.spacing||0,f=o.containerWidth,x=o.idealElementHeight||f/3;if(!f)throw new Error("Invalid container width");var w,h=[],b=[];for(t=0,e=c.length;t<e;t++)w=c[t].width/c[t].height,h.push(w),b.push(Math.round(w*100));var g=0;for(t=0,e=h.length;t<e;t++)g+=h[t]*x;var N=Math.round(g/f);if(N<1){var v=0,$;n=c.length;var l=0;if(o.align==="center"){for(var m=(n-1)*u,t=0;t<n;t++)m+=Math.round(x*h[t])-u*(n-1)/n;l=Math.floor((f-m)/2)}for(var t=0;t<n;t++)$=Math.round(x*h[t])-u*(n-1)/n,a.push({y:0,x:l+v,width:$,height:x}),v+=$,t!==e-1&&(v+=u);_=x}else{var d=Q(b,N),p=0,_=0,v;for(t=0,e=d.length;t<e;t++){var M=p,j=0;for(i=0,y=d[t].length;i<y;i++)j+=h[M+i],p++;for(v=0,r=Math.round(f/j),n=d[t].length,i=0;i<n;i++)$=Math.round((f-(n-1)*u)/j*h[M+i]),a.push({y:_,x:v,width:$,height:r}),v+=$,i!==n-1&&(v+=u);_+=r,t!==e-1&&(_+=u)}}return{width:f,height:_,positions:a}};var Q=function(c,o){var t,i,y,e,r,a,n,u,f,x,w,h,b,g,N;if(r=c.length,o<=0)return[];if(o>r)return c.map(function(l){return[l]});for(n=function(){var l,m;for(m=[],f=l=0;0<=r?l<r:l>r;f=0<=r?++l:--l)m.push(function(){var d,p;for(p=[],u=d=0;0<=o?d<o:d>o;u=0<=o?++d:--d)p.push(0);return p}());return m}(),a=function(){var l,m,d;for(d=[],f=l=0,m=r-1;0<=m?l<m:l>m;f=0<=m?++l:--l)d.push(function(){var p,_,M;for(M=[],u=p=0,_=o-1;0<=_?p<_:p>_;u=0<=_?++p:--p)M.push(0);return M}());return d}(),i=x=0;0<=r?x<r:x>r;i=0<=r?++x:--x)n[i][0]=c[i]+(i?n[i-1][0]:0);for(y=w=0;0<=o?w<o:w>o;y=0<=o?++w:--w)n[0][y]=c[0];for(i=h=1;1<=r?h<r:h>r;i=1<=r?++h:--h)for(y=b=1;1<=o?b<o:b>o;y=1<=o?++b:--b){for(e=[],u=g=0;0<=i?g<i:g>i;u=0<=i?++g:--g)e.push([Math.max(n[u][y-1],n[i][0]-n[u][0]),u]);var v,$=!1;for(g=0,N=e.length;g<N;g++)(g===0||e[g][0]<v)&&(v=e[g][0],$=g);e=e[$],n[i][y]=e[0],a[i-1][y-1]=e[1]}for(r=r-1,o=o-2,t=[];o>=0&&(t=[function(){var l,m,d,p;for(p=[],i=l=m=a[r-1][o]+1,d=r+1;m<=d?l<d:l>d;i=m<=d?++l:--l)p.push(c[i]);return p}()].concat(t),r=a[r-1][o],o=o-1,r!==0););return[function(){var l,m,d;for(d=[],i=l=0,m=r+1;0<=m?l<m:l>m;i=0<=m?++l:--l)d.push(c[i]);return d}()].concat(t)}});var B=W((Y,q)=>{L();q.exports=function(c,o){var t,i,y,e,r,a,n,u,f,x,w,h,b,g,N=o.spacing||0,v=o.containerWidth;if(!v)throw new Error("Invalid container width");var $=o.columnCount||3,l=Math.round((v-($-1)*N)/$),m=o.maxSpan||3,d=[],p=[];for(t=0;t<$;t++)p.push(0);for(t=0,e=c.length;t<e;t++){for(x=c[t].width,w=c[t].height,g=x/w,h=l,b=Math.round(h/g),f=!1,n=0,r=$;n<r;n++)(f===!1||p[n]<f)&&(f=p[n],u=n);var _=p[u],M=_!==0?N:0;_+=M,p[u]+=b+M,d.push({x:u*l+u*N,y:_,width:h,height:b})}return{width:v,height:Math.max.apply(Math,p),positions:d}}});var G=W((Z,F)=>{L();F.exports.fixed_partition=D();F.exports.fixed_columns=B()});L();L();var I=P(O()),J=P(G());var T=({data:c})=>{let{name:o,bio:t,social:i}=c.story.profile,{title:y,cover:e}=c,r=y?`${y} | ${o}`:o,a=c.story.photos.find(f=>f.order==1),n=new URL(c.canonical),u=e&&(e==null?void 0:e.bh)?`${n.protocol}//${n.host}${C(e)}`:e&&(e==null?void 0:e.bh)?e==null?void 0:e.url:a&&(a==null?void 0:a.bh)?`${n.protocol}//${n.host}${C(a)}`:a==null?void 0:a.url;return{title:r,description:t,"og:title":r,"og:url":c.canonical,"og:description":t,"og:image":u,"twitter:card":"summary_large_image","twitter:creator":i.twitter?i.twitter:""}};function K(){let{status:c,story:o,cover:t,title:i}=k();(0,I.useEffect)(()=>(y(),A()&&window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}),[]);let y=()=>{document.querySelectorAll(".moul-content-photos").forEach(r=>{let a=r.querySelectorAll(".moul-grid"),n=[];a.forEach(w=>{var v;let[h,b]=(v=w.getAttribute("data-size"))==null?void 0:v.split(":"),{width:g,height:N}=H(+h,+b,2048,2048);n.push({width:g,height:N})});let u=document.body.clientWidth<800?280:380,f=document.body.clientWidth>2e3&&n.length<4?1800:document.body.clientWidth>3e3?2400:document.body.clientWidth,x=(0,J.fixed_partition)(n,{containerWidth:f,idealElementHeight:u,spacing:16});r.classList.add("is-grid"),r.style.width=`${x.width}px`,r.style.height=`${x.height}px`,x.positions.forEach((w,h)=>{a[h].style.position="absolute",a[h].style.top=`${x.positions[h].y}px`,a[h].style.left=`${x.positions[h].x}px`,a[h].style.width=`${x.positions[h].width}px`,a[h].style.height=`${x.positions[h].height}px`})})};return s.createElement(s.Fragment,null,c==="not_found"&&s.createElement("div",null,"Not found!"),c==="ok"&&s.createElement(s.Fragment,null,s.createElement("div",{className:""},t&&(t==null?void 0:t.name)&&s.createElement("div",{className:"moul-cover w-full h-[350px] md:h-[450px] lg:h-[600px] xl:h-[650px] relative mb-16"},s.createElement(s.Fragment,null,(t==null?void 0:t.bh)?s.createElement(z,{to:`photo/${t==null?void 0:t.hash}`,key:t==null?void 0:t.hash,className:""},s.createElement("picture",{className:"absolute top-0 left-0 w-full h-full"},s.createElement("img",{src:`data:image/jpeg;charset=utf-8;base64,${t==null?void 0:t.bh}`,"data-srcset":E(t),"data-sizes":"auto",className:"lazy w-full h-full object-cover",alt:t.name}))):s.createElement(z,{to:`photo/${t==null?void 0:t.hash}`,key:t==null?void 0:t.hash,className:""},s.createElement("picture",{className:"absolute top-0 left-0 w-full h-full"},s.createElement("img",{src:t.url,"data-sizes":"auto",className:"lazy w-full h-full object-cover",alt:t.name}))))),s.createElement(S,{profile:o.profile}),i&&s.createElement("div",{className:"moul-content-title mx-auto font-bold max-w-3xl mb-6 text-neutral-900 dark:text-neutral-50 px-6 xs:px-0"},s.createElement("h1",{className:"text-3xl md:text-5xl"},i))),s.createElement("div",{className:"mx-auto"},o.blocks.map((e,r)=>s.createElement("div",{className:`mx-auto leading-relaxed moul-content-${e.type}`,key:r},e.type==="quote"&&s.createElement("blockquote",{className:"px-6 xs:px-0 text-lg md:text-xl max-w-3xl mx-auto my-8 md:my-10 text-neutral-800 border-neutral-800 dark:text-neutral-400 dark:border-neutral-400 border-l-4 pl-4"},e.text),e.type==="paragraph"&&s.createElement("p",{className:"px-6 xs:px-0 text-lg md:text-xl max-w-3xl mx-auto my-8 md:my-10 text-neutral-700 dark:text-neutral-200"},e.text),e.type==="heading"&&s.createElement("h2",{className:"px-6 xs:px-0 text-2xl md:text-3xl font-bold sm:text-4xl max-w-3xl mx-auto my-8 md:my-10 text-neutral-800 dark:text-neutral-100"},e.text),e.type==="subheading"&&s.createElement("h3",{className:"px-6 xs:px-0 text-xl md:text-2xl font-bold sm:text-3xl max-w-3xl mx-auto my-8 md:my-10 text-neutral-800 dark:text-neutral-100"},e.text),e.type==="photos"&&s.createElement("div",{className:"relative"},o.photos.filter(a=>a.type===e.text).map((a,n)=>s.createElement(z,{to:`photo/${a.hash}`,key:a.hash},s.createElement("picture",{className:"moul-grid","data-size":`${a.width}:${a.height}`},(a==null?void 0:a.bh)?s.createElement("img",{className:"lazy",src:`data:image/jpeg;charset=utf-8;base64,${a==null?void 0:a.bh}`,"data-sizes":"auto","data-srcset":E(a)}):s.createElement("img",{className:"lazy",src:a.url,"data-sizes":"auto"})))))))),s.createElement("footer",{className:"flex flex-col w-full text-center px-6 my-16 text-neutral-500 dark:text-neutral-400"},(o==null?void 0:o.profile.name)&&s.createElement("p",null,"Copyright \xA9 ",o.profile.name,". All Rights Reserved."))))}export{K as default,T as meta};
